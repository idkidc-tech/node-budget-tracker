<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget Tracker</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <header><h1>My Budget Tracker</h1></header>
        <div class="summary">
            <div class="income"><span>$<%= totalIncome %></span><p>Total Income</p></div>
            <div class="expense"><span>$<%= totalExpenses %></span><p>Total Expenses</p></div>
            <div class="balance"><span>$<%= balance %></span><p>Current Balance</p></div>
        </div>
        <div class="actions">
            <h2>Add New Transaction</h2>
            <form action="/add" method="POST" class="form-inline">
                <input type="text" name="description" placeholder="Description" required>
                <input type="number" name="amount" placeholder="Amount" step="0.01" required>
                <select name="type" required><option value="expense">Expense</option><option value="income">Income</option></select>
                <button type="submit">Add</button>
            </form>
        </div>
        <h2>Transaction History</h2>
        <table>
            <thead><tr><th>Date</th><th>Description</th><th>Amount</th><th>Type</th><th>Action</th></tr></thead>
            <tbody>
                <% transactions.forEach(transaction => { %>
                <tr>
                    <td><%= new Date(transaction.date).toLocaleDateString() %></td>
                    <td><%= transaction.description %></td>
                    <td class="<%= transaction.type %>"><% if (transaction.type === 'expense') { %>-<% } %>$<%= transaction.amount.toFixed(2) %></td>
                    <td><%= transaction.type.charAt(0).toUpperCase() + transaction.type.slice(1) %></td>
                    <td><form action="/delete/<%= transaction.id %>" method="POST"><button type="submit" class="delete-btn">Delete</button></form></td>
                </tr>
                <% }) %>
                <% if (transactions.length === 0) { %><tr><td colspan="5">No transactions yet. Add one above!</td></tr><% } %>
            </tbody>
        </table>
    </div>
</body>
</html>
